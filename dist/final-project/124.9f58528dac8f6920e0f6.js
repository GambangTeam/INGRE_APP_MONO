"use strict";(self.webpackChunkfinal_project=self.webpackChunkfinal_project||[]).push([[124],{8124:(T,x,p)=>{p.r(x),p.d(x,{AuthModule:()=>Q});var m=p(8583),v=p(8866),U=p(8002),f=p(665),i=p(639),L=p(1841);let E=(()=>{class e{constructor(t){this.http=t}login(t){return console.log(t),this.http.post("/api/auth/admin",t)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(L.eN))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function J(e,n){if(1&e&&(i.ynx(0),i._UZ(1,"span",1),i.BQk()),2&e){const t=i.oxw();i.xp6(1),i.Q6J("innerHtml",t.displayErrors(),i.oJD)}}let M=(()=>{class e{constructor(){this.messages={required:"Field harus diisi",minlength:"Field %s minimal harus lebih panjang dari %s.",maxlength:"Field %s minimal harus lebih pendek dari %s.",email:"Masukkan Email yang valid"}}ngOnInit(){}isFieldValid(){return this.control.invalid&&this.control.touched}displayErrors(){let t="";const r=this.control.errors;for(let a in r){const o=r[a]?Object.values(r[a]):[],l=[this.label].concat(o);t+=`<p class="m-0">${this.formatString(this.messages[a],l)}</p>`}return t}formatString(t,r){let a=0;return t?t.replace(/%s/g,()=>r.slice(a,++a)):""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-validation"],["","validation",""]],inputs:{control:"control",fieldLabel:"fieldLabel",label:"label"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"innerHtml"]],template:function(t,r){1&t&&i.YNc(0,J,2,1,"ng-container",0),2&t&&i.Q6J("ngIf",r.isFieldValid())},directives:[m.O5],styles:[""]}),e})();var B=p(8424);function R(e,n){1&e&&(i.TgZ(0,"div"),i.TgZ(1,"p",15),i._uU(2," Periksa Kembali Email dan Password yang digunakan "),i.qZA(),i.qZA())}function N(e,n){1&e&&(i.TgZ(0,"div",16),i.TgZ(1,"h2",17),i._uU(2,"Loading...."),i.qZA(),i._UZ(3,"app-loading"),i.qZA())}let y=class{constructor(n,t,r){this.router=n,this.activatedRoute=t,this.service=r,this.isLoading=!1,this.httpError=!1,this.loginForm=new f.cw({username:new f.NI("",[f.kI.required,f.kI.email]),password:new f.NI("",[f.kI.required,f.kI.minLength(4)])})}ngOnInit(){this.init()}init(){sessionStorage.getItem("token")&&this.router.navigateByUrl("dashboard"),this.activatedRoute.params.pipe((0,U.U)(n=>n.action)).subscribe(n=>{"logout"==n?(sessionStorage.removeItem("token"),sessionStorage.removeItem("username"),this.router.navigateByUrl("dashboard")):"login"==n&&(this.router.navigateByUrl(""),sessionStorage.removeItem("token"),sessionStorage.removeItem("username"),this.router.navigateByUrl("dashboard"))})}onFormSubmit(){var n;this.isLoading=!0,sessionStorage.setItem("username",null===(n=this.loginForm.get("username"))||void 0===n?void 0:n.value),this.loginForm.valid&&this.service.login(this.loginForm.value).subscribe(t=>{sessionStorage.setItem("token",t.token),this.isLoading=!1,this.router.navigateByUrl("dashboard"),sessionStorage.setItem("kodeKey","@mamen12")},t=>{console.log(t),this.init(),this.httpError=!0,this.isLoading=!1})}isFieldValid(n){const t=this.loginForm.get(n);return t&&t.touched&&t.invalid?"is-invalid":t&&t.valid?"is-valid":""}};y.\u0275fac=function(n){return new(n||y)(i.Y36(v.F0),i.Y36(v.gz),i.Y36(E))},y.\u0275cmp=i.Xpm({type:y,selectors:[["app-auth"]],decls:20,vars:13,consts:[[1,"container"],[1,"w-full","md:w-3/5","lg:w-2/5","mx-auto","lg:py-10","md:py-5","py-0","relative"],[1,"rounded-xl","overflow-hidden","pb-11","bg-white","shadow-lg","relative"],[1,"mx-auto","text-4xl","justify-center","flex","absolute","items-center","text-primary","px-4","py-3","text-center","w-3/4","lg:left-4ng6","left-0","right-0","rounded-lg","font-semibold","font-nunito"],["action","",1,"mt-20","px-6",3,"formGroup","ngSubmit"],[1,"relative"],["id","username","formControlName","username","name","username","type","text","placeholder","john@doe.com"],["for","username",1,"absolute","left-0","-top-3.5","text-primary","text-sm","transition-all","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-400","peer-placeholder-shown:top-2","peer-focus:-top-3.5","peer-focus:text-gray-600","peer-focus:text-sm"],["validation","",1,"text-red-500","text-sm","mt-2","font-light",3,"control","fieldLabel"],[1,"mt-14","relative"],["id","password","type","password","name","password","formControlName","password","placeholder","Password"],["for","password",1,"absolute","left-0","-top-3.5","text-gray-600","text-sm","transition-all","peer-placeholder-shown:text-base","peer-placeholder-shown:text-gray-400","peer-placeholder-shown:top-2","peer-focus:-top-3.5","peer-focus:text-gray-600","peer-focus:text-sm"],["type","sumbit",1,"mt-20","px-4","py-2","rounded","bg-primary","hover:bg-orange-600","text-white","font-semibold","text-center","block","w-full","focus:outline-none","focus:ring","focus:ring-offset-2","focus:ring-gray-200","focus:ring-opacity-80","cursor-pointer","font-nunito"],[4,"ngIf"],["class","\n      absolute\n      inset-0\n      bg-black\n      opacity-40\n      flex flex-col\n      justify-center\n      text-center\n      py-4\n      text-white\n      w-full\n      h-full\n    ",4,"ngIf"],[1,"text-red-600","text-xs","font-extralight","py-3","text-center"],[1,"absolute","inset-0","bg-black","opacity-40","flex","flex-col","justify-center","text-center","py-4","text-white","w-full","h-full"],[1,"text-sm","font-semibold","py-5"]],template:function(n,t){1&n&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i.TgZ(3,"h1",3),i._uU(4," Login "),i.qZA(),i.TgZ(5,"form",4),i.NdJ("ngSubmit",function(){return t.onFormSubmit()}),i.TgZ(6,"div",5),i._UZ(7,"input",6),i.TgZ(8,"label",7),i._uU(9,"Username"),i.qZA(),i._UZ(10,"div",8),i.qZA(),i.TgZ(11,"div",9),i._UZ(12,"input",10),i.TgZ(13,"label",11),i._uU(14,"Password"),i.qZA(),i._UZ(15,"div",8),i.qZA(),i.TgZ(16,"button",12),i._uU(17," Login "),i.qZA(),i.qZA(),i.YNc(18,R,3,0,"div",13),i.qZA(),i.qZA(),i.YNc(19,N,4,0,"div",14),i.qZA()),2&n&&(i.xp6(5),i.Q6J("formGroup",t.loginForm),i.xp6(2),i.Gre("\n              peer\n              h-10\n              w-full\n              border-b-2 border-gray-300\n              text-gray-900\n              placeholder-transparent\n              bg-transparent\n              focus:outline-none focus:border-primary\n              ",t.isFieldValid("username"),"\n\n            "),i.xp6(3),i.Q6J("control",t.loginForm.controls.username)("fieldLabel","username"),i.xp6(2),i.Gre("\n              peer\n              h-10\n              w-full\n              border-b-2 border-gray-300\n              text-gray-900\n              placeholder-transparent\n              bg-transparent\n              focus:outline-none focus:border-primary\n              ",t.isFieldValid("password"),"\n            "),i.xp6(3),i.Q6J("control",t.loginForm.controls.password)("fieldLabel","password"),i.xp6(3),i.Q6J("ngIf",t.httpError),i.xp6(1),i.Q6J("ngIf",t.isLoading))},directives:[f._Y,f.JL,f.sg,f.Fj,f.JJ,f.u,M,m.O5,B.N],styles:[""]}),y=function(e,n,t,r){var l,a=arguments.length,o=a<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,n,t,r);else for(var u=e.length-1;u>=0;u--)(l=e[u])&&(o=(a<3?l(o):a>3?l(n,t,o):l(n,t))||o);return a>3&&o&&Object.defineProperty(n,t,o),o}([(0,i.L6J)("window:popstate",["$event"])],y);const V=[{path:"login",component:y},{path:":action",component:y}];let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[v.Bz.forChild(V)],v.Bz]}),e})();var G=p(4466);let Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[m.ez,q,f.UX,f.u5,G.m]]}),e})()},8424:(T,x,p)=>{p.d(x,{N:()=>v});var m=p(639);let v=(()=>{class h{constructor(){}ngOnInit(){}}return h.\u0275fac=function(b){return new(b||h)},h.\u0275cmp=m.Xpm({type:h,selectors:[["app-loading"]],decls:4,vars:0,consts:[[1,"flex","items-center","justify-center","space-x-2","animate-bounce"],[1,"w-8","h-8","bg-blue-400","rounded-full"],[1,"w-8","h-8","bg-green-400","rounded-full"],[1,"w-8","h-8","bg-primary","rounded-full"]],template:function(b,I){1&b&&(m.TgZ(0,"div",0),m._UZ(1,"div",1),m._UZ(2,"div",2),m._UZ(3,"div",3),m.qZA())},styles:[""]}),h})()}}]);