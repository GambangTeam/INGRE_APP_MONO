"use strict";(self.webpackChunkfinal_project=self.webpackChunkfinal_project||[]).push([[158],{3158:(Q,u,l)=>{l.r(u),l.d(u,{ResepModule:()=>S});var d=l(8583),g=l(8866),i=l(665),v=l(8259),m=l.n(v),T=l(9193),f=l(8002),w=l(3190),e=l(639),h=l(1841),A=l(7709);let Z=(()=>{class o{constructor(t){this.http=t,this.httpOptions={headers:new h.WM({"Content-Type":"multipart/form-data"})},this.recipeSubject=new A.xQ}getAllCategory(){return this.http.get("/api/product/categories")}getAllIngredients(){return this.http.get("/api/product/ingredient")}getAllRecipe(){return this.http.get("/api/product/recipe")}getById(t){return this.http.get(`/api/product/recipe/${t}`)}save(t,n){const s=new FormData;return console.log(n),s.append("recipeDto",JSON.stringify(t)),console.log(t),n&&s.append("upload",n),t.id?(s.append("id",`${t.id}`),this.http.put("/api/admin/product/recipe",s)):this.http.post("/api/admin/product/recipe",s)}delete(t){return this.http.delete(`/api/admin/product/recipe/${t}`).pipe((0,f.U)(()=>this.recipeSubject.next(!0)))}listUpdated(){return this.recipeSubject.asObservable()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(h.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var x=l(3735);function q(o,r){if(1&o&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.s9C("value",t.category),e.xp6(1),e.hij(" ",t.category," ")}}function _(o,r){if(1&o&&(e.TgZ(0,"tr",27),e.TgZ(1,"td",28),e._uU(2),e.qZA(),e.TgZ(3,"td",28),e._uU(4),e.qZA(),e.TgZ(5,"td",28),e._uU(6),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.hij(" ",t.ingredient.name," "),e.xp6(2),e.hij(" ",t.qty," "),e.xp6(2),e.hij(" ",t.ingredient.unit," ")}}function F(o,r){if(1&o&&(e.TgZ(0,"table",23),e.TgZ(1,"thead"),e.TgZ(2,"tr",24),e.TgZ(3,"th",25),e._uU(4," Name "),e.qZA(),e.TgZ(5,"th",25),e._uU(6," Qty "),e.qZA(),e.TgZ(7,"th",25),e._uU(8," Item Unit "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"tbody"),e.YNc(10,_,7,3,"tr",26),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(10),e.Q6J("ngForOf",null==t.ingredientsRecipe?null:t.ingredientsRecipe.ingredients)}}function C(o,r){if(1&o&&(e.TgZ(0,"option",22),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function R(o,r){if(1&o&&(e.TgZ(0,"div"),e.ynx(1,29),e.TgZ(2,"div",30),e.TgZ(3,"div",31),e.TgZ(4,"label",32),e._uU(5,"Name"),e.qZA(),e.TgZ(6,"select",33),e.TgZ(7,"option",34),e._uU(8," Ingredients "),e.qZA(),e.YNc(9,C,2,2,"option",13),e.qZA(),e.qZA(),e.TgZ(10,"div",35),e.TgZ(11,"label",36),e._uU(12,"Qty"),e.qZA(),e._UZ(13,"input",37),e.qZA(),e.qZA(),e.BQk(),e.qZA()),2&o){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("formGroup",t),e.xp6(8),e.Q6J("ngForOf",n.fieldIngre),e.xp6(4),e.Q6J("maxLength",4)}}let y=(()=>{class o{constructor(t,n,s){this.activatedRoutes=t,this.recipeService=n,this.router=s,this.categorys=[],this.fieldIngre=[],this.id=null,this.tableIngredient=!1,this.isLoading=!1,this.recipeForm=new i.cw({name:new i.NI("",[i.kI.required]),recipeDetail:new i.NI("",[i.kI.required]),category:new i.NI("",i.kI.required),ingredients:new i.Oe([]),photo:new i.NI}),this.ingredientsForm=new i.cw({id:new i.NI,ingredientId:new i.NI,qty:new i.NI})}ngOnInit(){this.getCategory(),this.getAllIngredients(),this.selected()}getCategory(){this.recipeService.getAllCategory().subscribe(t=>{this.categorys=t},console.error,()=>{})}getAllIngredients(){this.recipeService.getAllIngredients().subscribe(t=>{this.fieldIngre=t},console.error,()=>{})}getIngredients(){return this.recipeForm.get("ingredients").controls}addIgredients(t){this.recipeForm.get("ingredients").push(new i.cw({ingredientId:new i.NI(t?t.ingredient:"",[i.kI.required]),qty:new i.NI(t?t.qty:null,[i.kI.required])}))}onSubmitRecipe(){const t=this.recipeForm.value;this.isLoading=!0,this.recipeService.save(t,this.upload).subscribe({next:n=>{var s;(null===(s=this.recipeForm.get("id"))||void 0===s?void 0:s.value)?(this.router.navigateByUrl("recipe"),this.successConfirmation(),this.isLoading=!1,this.recipeForm.reset()):(this.isLoading=!1,this.successConfirmation(),this.recipeForm.reset())},error:n=>{console.error(n),this.alertConfirmation()},complete:()=>{}})}handleFileUpload(t){const n=t.target.files;console.log(t.target.files),n&&(this.upload=n.item(0))}alertConfirmation(){m().fire({icon:"error",title:"Oops...",text:"Something went wrong! Pastikan semua field sudah di isi"})}successConfirmation(){m().fire({icon:"success",title:"Yesss...",text:"Data Behasil Disimpan"})}setFormValue(t){var n,s,p,a,c;console.log(t),this.recipeForm.addControl("id",new i.NI),null===(n=this.recipeForm.get("id"))||void 0===n||n.setValue(this.id),null===(s=this.recipeForm.get("name"))||void 0===s||s.setValue(t.name),null===(p=this.recipeForm.get("recipeDetail"))||void 0===p||p.setValue(t.recipeDetail),null===(a=this.recipeForm.get("category"))||void 0===a||a.setValue(t.category);const L=this.recipeForm.get("ingredients");null===(c=t.ingredients)||void 0===c||c.forEach(b=>{L.push(new i.cw({ingredientId:new i.NI(b.ingredientId,[i.kI.required]),qty:new i.NI(b.qty,[i.kI.required])}))})}selected(){this.activatedRoutes.params.pipe((0,f.U)(t=>t.id),(0,w.w)(t=>t?(this.id=t,this.recipeService.getById(t)):T.E)).subscribe(t=>{t&&(console.log(t),this.tableIngredient=!0,this.ingredientsRecipe=t,this.setFormValue(t),console.log(this.recipeForm))},t=>console.error(t),()=>{})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(g.gz),e.Y36(Z),e.Y36(g.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-form-resep"]],decls:35,vars:7,consts:[[1,"overflow-y-scroll"],[1,"px-2","py-2","shadow-lg","pb-10"],[1,"lg:px-4","px-2","lg:py-4","py-2","lg:w-3/4","md:w-5/6","w-full"],["multipart","",1,"w-full",3,"formGroup","ngSubmit"],[1,"flex","flex-col","my-5"],["for","",1,"font-nunito","text-lg","font-medium"],["formControlName","name","type","text",1,"px-2","py-1","text-sm","rounded-lg","border-2","border-gray-200","focus:outline-none","focus:border-orange-400"],["for","",1,"font-nunito","text-lg","font-medium","text-gray-700"],["formControlName","recipeDetail","type","text","rows","15","cols","200","placeholder","Enter some long form content.",1,"form-textarea","mt-1","block","w-full","text-sm","px-2","py-2","rounded-lg","border-2","border-gray-200","focus:outline-none","focus:border-orange-400"],[1,"block","text-left"],[1,"text-gray-700"],["formControlName","category","aria-placeholder","",1,"form-select","px-2","py-1","block","w-full","mt-1","text-sm","rounded-lg","border-2","border-gray-200","focus:outline-none","focus:border-orange-400"],["value","","selected","","disabled",""],["aria-placeholder","Pilih satu","class","text-sm",3,"value",4,"ngFor","ngForOf"],["for","",1,"font-nunito","text-sm","my-2","font-medium"],["type","file",1,"text-sm",3,"change"],["class","rounded-md overflow-hidden shadow-md",4,"ngIf"],[1,"my-4"],["type","button",1,"px-3","py-1","text-white","bg-primary","rounded-lg","text-sm",3,"click"],[1,"py-5"],[4,"ngFor","ngForOf"],["type","submit",1,"px-3","py-2","bg-primary","text-white","font-nunito","rounded-md","text-sm","lg:text-base"],["aria-placeholder","Pilih satu",1,"text-sm",3,"value"],[1,"rounded-md","overflow-hidden","shadow-md"],[1,"bg-primary","text-white"],[1,"text-left","px-3","py-1","font-nunito","lg:text-sm","text-xs"],["class","border-b border-gray-400",4,"ngFor","ngForOf"],[1,"border-b","border-gray-400"],[1,"px-3","py-1","font-nunito","text-xs","md:text-sm"],[3,"formGroup"],[1,"flex","items-center","my-2"],[1,"flex","flex-col","w-2/3"],["for","nameBahan",1,"text-sm"],["formControlName","ingredientId",1,"w-2xl","bg-transparent","form-select","px-2","py-1","block","w-full","mt-1","text-sm","rounded-lg","border-2","border-gray-200","focus:outline-none","focus:border-orange-400"],["value","","disabled","","selected","",1,"px-2"],[1,"flex","flex-col","mx-2","w-1/3"],["for","quantity",1,"text-sm"],["formControlName","qty","type","number","min","1","name","quantity",1,"px-2","py-1","text-sm","border-2","rounded-lg","border-gray-200","focus:outline-none","focus:border-orange-500",3,"maxLength"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h1"),e._uU(4,"Form Recipe"),e.qZA(),e.TgZ(5,"form",3),e.NdJ("ngSubmit",function(){return n.onSubmitRecipe()}),e.TgZ(6,"div",4),e.TgZ(7,"label",5),e._uU(8,"Name Recipe"),e.qZA(),e._UZ(9,"input",6),e.qZA(),e.TgZ(10,"div",4),e.TgZ(11,"label",7),e._uU(12,"Recipe Detail"),e.qZA(),e._UZ(13,"textarea",8),e.qZA(),e.TgZ(14,"div"),e.TgZ(15,"label",9),e.TgZ(16,"span",10),e._uU(17,"Category"),e.qZA(),e.qZA(),e.TgZ(18,"select",11),e.TgZ(19,"option",12),e._uU(20,"Pilih Category"),e.qZA(),e.YNc(21,q,2,2,"option",13),e.ALo(22,"searchFilter"),e.qZA(),e.qZA(),e.TgZ(23,"div",4),e.TgZ(24,"label",14),e._uU(25,"Image Recipe"),e.qZA(),e.TgZ(26,"input",15),e.NdJ("change",function(p){return n.handleFileUpload(p)}),e.qZA(),e.qZA(),e.YNc(27,F,11,1,"table",16),e.TgZ(28,"div",17),e.TgZ(29,"button",18),e.NdJ("click",function(){return n.addIgredients()}),e._uU(30," Add Ingredients "),e.qZA(),e.qZA(),e.TgZ(31,"div",19),e.YNc(32,R,14,3,"div",20),e.qZA(),e.TgZ(33,"button",21),e._uU(34," Simpan "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("formGroup",n.recipeForm),e.xp6(16),e.Q6J("ngForOf",e.xi3(22,4,n.categorys,n.searchText)),e.xp6(6),e.Q6J("ngIf",n.tableIngredient),e.xp6(5),e.Q6J("ngForOf",n.getIngredients()))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.EJ,i.YN,i.Kr,d.sg,d.O5,i.wV,i.qQ],pipes:[x.G],styles:[""]}),o})();var U=l(8424);function I(o,r){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.hij(" ",t.ingredient.name,", ")}}function N(o,r){if(1&o&&(e.TgZ(0,"div",40),e.TgZ(1,"p",41),e._uU(2),e.qZA(),e.TgZ(3,"div",42),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"currency"),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.qZA(),e.qZA()),2&o){const t=r.$implicit;e.xp6(2),e.Oqu(t.ingredient.name),e.xp6(3),e.hij(" ",e.gM2(6,4,t.ingredient.price,"IDR ","symbol","3.0")," "),e.xp6(3),e.Oqu(t.ingredient.unit),e.xp6(2),e.hij("",t.qty," qty")}}function M(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"tr",20),e.TgZ(1,"td",21),e._uU(2),e.qZA(),e.TgZ(3,"td",21),e._uU(4),e.qZA(),e.TgZ(5,"td",22),e.TgZ(6,"div"),e.TgZ(7,"div",23),e.YNc(8,I,2,1,"p",24),e.qZA(),e.TgZ(9,"button",25),e._uU(10," lainnya... "),e.qZA(),e.TgZ(11,"div",26),e.TgZ(12,"div",27),e.TgZ(13,"div",28),e.TgZ(14,"div",29),e.TgZ(15,"div",30),e.TgZ(16,"h1"),e._uU(17),e.qZA(),e.TgZ(18,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleModal()}),e.qZA(),e.qZA(),e.TgZ(19,"div",32),e.YNc(20,N,11,9,"div",33),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"td",34),e.TgZ(22,"button",35),e.O4$(),e.TgZ(23,"svg",36),e._UZ(24,"path",37),e.qZA(),e.qZA(),e.kcU(),e.TgZ(25,"button",38),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().onDeleteRecipe(p.id)}),e.O4$(),e.TgZ(26,"svg",36),e._UZ(27,"path",39),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=r.$implicit;e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.category," "),e.xp6(4),e.Q6J("ngForOf",t.ingredients),e.xp6(9),e.hij("Detail Ingredient Recipe ",t.name,""),e.xp6(3),e.Q6J("ngForOf",t.ingredients),e.xp6(2),e.MGl("routerLink","/recipe/form-recipe/",t.id,"")}}function O(o,r){1&o&&(e.TgZ(0,"div",43),e.TgZ(1,"h2",44),e._uU(2,"Loading...."),e.qZA(),e._UZ(3,"app-loading"),e.qZA())}const j=[{path:"",component:(()=>{class o{constructor(t){this.recipeService=t,this.recipes=[],this.isLoading=!0,this.showModal=!1}ngOnInit(){this.init(),this.recipeService.listUpdated()}init(){this.recipeService.getAllRecipe().subscribe({next:t=>{this.isLoading=!1,this.recipes=t,console.log(t)},error:()=>{this.isLoading=!0},complete:()=>{}})}onDeleteRecipe(t){this.isLoading=!0,this.recipeService.delete(t).subscribe({next:()=>{},error:n=>{console.error(n)},complete:()=>{this.init(),this.isLoading=!1}})}toggleModal(){this.showModal=!this.showModal}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-resep"]],decls:31,vars:6,consts:[[1,"lg:mx-5","mx-1","lg:my-4","my-2","shadow-lg","rounded-lg","overflow-hidden"],[1,"lg:px-4","px-1","lg:py-4","py-1","border-b-2","shadow-md","border-orange-600"],[1,"font-nunito","font-semibold","text-2xl"],[1,"px-3","py-8","flex","flex-col"],[1,"flex","items-center","justify-between"],["routerLink","form-recipe",1,"font-semibold","bg-primary","lg:px-5","px-2","py-2","rounded-lg","text-white","flex","items-center","lg:text-base","text-xs"],[1,"lg:ml-4","ml-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"lg:h-6","lg:w-6","w-3","h-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"relative","items-center","border-2","rounded","lg:mx-0","mx-1","bg-white"],["type","text","placeholder","Search...",1,"lg:px-4","px-2","py-2","lg:w-80","w-40","lg:text-base","text-xs",3,"ngModel","ngModelChange"],["fill","currentColor","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"w-6","h-6","text-gray-600","absolute","right-2","top-2","bg-white"],["d","M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z"],[1,"my-5","mx-2","lg:text-base","text-xs","flex","flex-wrap","rounded-md","overflow-scroll"],[1,"border-collapse","border","border-gray-400","table","table-auto","my-2","rounded-md","overflow-x-scroll","truncate"],[1,"bg-primary","text-white","px-2","py-1","rounded-md"],[1,"border","px-3","py-1","border-gray-400"],[1,""],["class","inset-0",4,"ngFor","ngForOf"],["class","\n    absolute\n    inset-0\n    bg-black bg-opacity-40\n    flex flex-col\n    justify-center\n    text-center\n    py-4\n    text-white\n    w-full\n    h-full\n  ",4,"ngIf"],[1,"inset-0"],[1,"px-3","py-1","border","align-top","border-gray-400"],[1,"px-3","py-1","border","align-top","border-gray-400","ingredient"],[1,"ingredients"],[4,"ngFor","ngForOf"],[1,"show","text-primary","text-left","w-full","py-2"],[1,"hide"],[1,"absolute","inset-0","lg:right-0","h-screen","w-full","justify-center","flex","flex-col","items-center","lg:items-end"],[1,"md:w-3/4","lg:w-1/2","w-full","px-1","lg:mx-5"],[1,"w-full","bg-white","px-4","py-2","rounded-md"],[1,"flex","justify-between","py-2","border-b-2","border-primary"],[3,"click"],[1,"w-full","py-1"],["class","flex w-full justify-between",4,"ngFor","ngForOf"],[1,"px-3","py-1","border","border-gray-400","align-top"],[1,"px-2.5","rounded-md","py-1","text-white","bg-green-700",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"px-2.5","rounded-md","py-1","text-white","bg-red-600","mx-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","w-full","justify-between"],[1,"w-2/6"],[1,"w-4/6","flex","justify-between","text-left"],[1,"absolute","inset-0","bg-black","bg-opacity-40","flex","flex-col","justify-center","text-center","py-4","text-white","w-full","h-full"],[1,"text-sm","font-semibold","py-5"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3,"Dashboard Recipe Admin"),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"button",5),e._uU(7," Add "),e.TgZ(8,"span",6),e.O4$(),e.TgZ(9,"svg",7),e._UZ(10,"path",8),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(11,"div",9),e.TgZ(12,"input",10),e.NdJ("ngModelChange",function(p){return n.searchText=p}),e.qZA(),e.O4$(),e.TgZ(13,"svg",11),e._UZ(14,"path",12),e.qZA(),e.qZA(),e.qZA(),e.kcU(),e.TgZ(15,"div",13),e.TgZ(16,"table",14),e.TgZ(17,"thead",15),e.TgZ(18,"tr"),e.TgZ(19,"th",16),e._uU(20,"Name"),e.qZA(),e.TgZ(21,"th",16),e._uU(22,"Category"),e.qZA(),e.TgZ(23,"th",16),e._uU(24,"Ingredients"),e.qZA(),e.TgZ(25,"th",16),e._uU(26,"Action"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"tbody",17),e.YNc(28,M,28,6,"tr",18),e.ALo(29,"searchFilter"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(30,O,4,0,"div",19)),2&t&&(e.xp6(12),e.Q6J("ngModel",n.searchText),e.xp6(16),e.Q6J("ngForOf",e.xi3(29,3,n.recipes,n.searchText)),e.xp6(2),e.Q6J("ngIf",n.isLoading))},directives:[g.rH,i.Fj,i.JJ,i.On,d.sg,d.O5,U.N],pipes:[x.G,d.H9],styles:[".ingredients[_ngcontent-%COMP%]{height:50px;overflow:hidden}.show[_ngcontent-%COMP%]:focus + .hide[_ngcontent-%COMP%]{display:block}.hide[_ngcontent-%COMP%]{display:none}"]}),o})()},{path:"form-recipe",component:y},{path:"form-recipe/:id",component:y}];let k=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[g.Bz.forChild(j)],g.Bz]}),o})();var J=l(4466);let S=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,k,i.u5,i.UX,J.m]]}),o})()}}]);